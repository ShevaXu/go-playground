# HTTP2 Push Demo

Inspired by the [blog](https://blog.golang.org/h2push).

Static files are copied from https://github.com/golang/blog/tree/master/content/h2push/server.

Certificate (self-signed) can be generated by: (read [this](http://stackoverflow.com/questions/12871565/how-to-create-pem-files-for-https-web-server) for more details)

```sh
openssl req -newkey rsa:2048 -new -nodes -x509 -days 3650 -keyout key.pem -out cert.pem
```

## Notes

### When To Use Server Push
   
> Consider using server push any time your network link is idle. Just finished sending the HTML for your web app? Don't waste time waiting, start pushing the resources your client will need. Are you inlining resources into your HTML file to reduce latency? Instead of inlining, try pushing. Redirects are another good time to use push because there is almost always a wasted round trip while the client follows the redirect. There are many possible scenarios for using push -- we are only getting started.
> 
> We would be remiss if we did not mention a few caveats. First, you can only push resources your server is authoritative for -- this means you cannot push resources that are hosted on third-party servers or CDNs. Second, don't push resources unless you are confident they are actually needed by the client, otherwise your push wastes bandwidth. A corollary is to avoid pushing resources when it's likely that the client already has those resources cached. Third, the naive approach of pushing all resources on your page often makes performance worse. When in doubt, measure.

### [Rules of Thumbs](https://docs.google.com/document/d/1K0NykTXBbbbTlv60t5MyJvXjqKGsCVNYHyLEXIxYMv0)

* Push just enough resources to fill idle network time, and no more.
* Push resources in evaluation-dependence order.
* Consider using special strategies to track the client-side cache.
* Use the right cookies when pushing resources that vary by cookie.
* Use server push to fill the initial cwnd and consider using preload links to reveal the remaining critical or hidden resources.
